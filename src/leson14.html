<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="css/bootstrap-reboot.min.css">
    <link rel="stylesheet" href="css/style.min.css">
    <title>Массивы в C#</title>
    <style>
        a {
            text-decoration: none;
        }
    </style>
</head>
<body>

    <header>
        <section class="header">
            <div class="container">
                <header id="sidebar">
                    <script src="header.js"></script>
                </header>
            </div>
        </section>
   </header>

    <div class="leson14">
        <div class="container">
            <h1>Массивы в C#</h1>
            <p>
                Содержание
                <ul>
                    <li><a href="#1">Вместо введения</a></li>
                    <li><a href="#2">Как создать массив в C#</a></li>
                    <li><a href="#3">Перебор элементов одномерного массива в C#</a>
                        <ul>
                            <li><a href="#3_1">В цикле foreach</a></li>
                            <li><a href="#3_2">В цикле for</a></li>
                        </ul>
                    </li>
                    <li><a href="#4">Многомерные массивы</a></li>
                    <li><a href="#5">Основные методы и свойства для работы с массивами в C#</a>
                        <ul>
                            <li><a href="#5_1">Свойства массивов C#</a></li>
                            <li><a href="#5_2">Методы массивов в C#</a></li>
                        </ul>
                    </li>
                    <li><a href="#6">Перебор элементов многомерного массива C#</a>
                        <ul>
                            <li><a href="#6_1">В цикле foreach</a></li>
                            <li><a href="#6_2">В цикле for</a></li>
                        </ul>
                    </li>
                    <li><a href="#7">Массивы массивов в C#</a></li>
                    <li><a href="#8">Неявно типизированные массивы</a></li>
                    <li><a href="#9">Итого</a></li>
                </ul>
                На данный момент мы знаем, что такое переменная, как задаётся её тип и как переменную инициализировать. С массивами C# мы уже сталкивались в работе, когда рассматривали циклы в C#. Но глубоко в тему не погружались. Теперь, когда мы знаем какие виды циклов имеются в C# и в чём их отличия, можно детально изучать вопросы, связанные с использованием массивов C#.
            </p>
            <h3><a name="1">Вместо введения</a></h3>
            <p>
                Допустим, у вам необходимо хранить в вашей программе 10 целочисленных значений. С одной стороны, если вам не лень (и не жалко тех, кто будет смотреть Ваш код) вы можете объявить 10 переменных типа int, инициализировать их и работать. А что делать, если требуется 100 значений или 1000? Опять же, можно сходить с ума и заводить под каждое значение отдельную переменную, а можно сделать проще — объявить переменную-массив и хранить в ней все значения.
                <br><br>
                Массив — это структура данных, которая содержит ряд переменных одного типа, доступ к которым осуществляется по индексу. Массивы в C# могут быть одномерными, многомерными, пустыми, также в C# массивы могут быть зубчатыми (массивы массивов). Но обо всём по порядку.
            </p>
            <h3><a name="2">Как создать массив в C#</a></h3>
            <p>
                Чтобы объявить массив в C# необходимо использовать следующую конструкцию:
                <br><br>
                <strong>Type[] ArrayName</strong>
                <br><br>
                где Type — это тип элементов массива, а ArrayName — его имя.  То есть, визуально, массив от обычной переменной отличает наличие после названия типа данных квадратных скобок. Например, вот так можно определить массив целых чисел типа int:
                <br><br>
                <strong>int[] array;</strong>
                <br><br>
                Так можно объявить массивы строк и вещественных чисел:
                <br><br>
                <strong>
                    double[] doubleArray; <br>
                    string[] stringArray;
                </strong>
                <br><br>
                Как мы уже знаем, объявить переменную — это только часть работы. Переменную необходимо инициализировать. При всех своих возможностях, C# никак не может знать сколько элементов будет содержать наш массив — 0, 10, 1000 и так далее. Сами массивы имеют ссылочный тип, и объявление переменной массива только выделяет память для ссылки на экземпляр массива. Фактические экземпляры массива создаются динамически во время выполнения с помощью оператора new. Операция new указывает длину нового экземпляра массива, которая остается неизменной в течение всего времени существования этого экземпляра.
                <br><br>
                Например, создадим массив, который будет хранить 5 чисел типа int:
                <br><br>
                <strong>int[] intArray = new int[5];</strong>
                <br><br>
                Теперь у нас есть экземпляр массива, который может хранить пять чисел. По умолчанию C# задал каждому элементу значение 0 (ноль). Проверить это легко с помощью уже известного нам цикла foreach:
                <br><br>
                <strong>
                    int[] intArray = new int[5]; <br>
                    foreach (int i in intArray) <br>
                    { <br>
                        Console.WriteLine(intArray[i]); <br>
                    }<br><br>
                </strong>
                Если создается массив, содержащий элементы ссылочного типа, то всем элементам по умолчанию будет присвоено значение null.  Чтобы задать каждому элементу массива свое значение можно обратиться к нему по его индексу. В C# элементы массива получают индексы от 0 до значение длина-1. Для нашего массива задать элементы можно вот так:
                <br><br>
                <strong>
                    intArray[0] = 10; //задаем значение первого элемента <br>
                    intArray[1] = 7; //задаем значение второго элемента <br>
                    intArray[2] = -3; //задаем значение третьего элемента <br>
                    intArray[3] = 18; //задаем значение четвертого элемента  <br>
                    intArray[4] = -125; //задаем значение пятого элемента
                </strong>
                <br><br>
                Язык C# достаточно гибкий, поэтому разработчики языка предусмотрели и тот вариант, что уже на этапе создания массива вы можете знать какие значения будут содержать его элементы, в этом случае, мы можем использовать такую конструкцию:
                <br><br>
               <strong> int[] intArray = new int[5] { 10, 7, -3, 18, -125};</strong>
                <br><br>
                Здесь мы объявили переменную-массив, инициализировали её и сразу задали каждому элементы своё значение. Оба варианта: и задание значения каждому элементу в по-отдельности и как в примере выше полностью равнозначны.  Но и на этом разработчики C# не остановились, чтобы дать разработчику максимум удобства работы с этим языком программирования. Ниже я покажу какие ещё варианты создания массивов могут применяться в C# на примере всё того же массива из пяти чисел:
                <br><br>
                <strong>
                    int[] intArray2 = new int[] { 10, 7, -3, 18, -125 }; <br>
                    int[] intArray3 = new[] { 10, 7, -3, 18, -125 }; <br>
                    int[] intArray4 = { 10, 7, -3, 18, -125 }; <br><br>
                </strong>
                Итого — целых пять возможных вариантов того, как задать массив в C#.
            </p>
            <h3><a name="3">Перебор элементов одномерного массива в C#</a></h3>
            <p>
                <h5><a name="3_1">В цикле foreach</a></h5>
                Выше я показал один из способов как перебрать элементы массива с использованием цикла foreach:
                <br><br>
                <strong>
                    int[] intArray = new int[5] { 10, 7, -3, 18, -125};//создали массив <br>
                    //перебираем все элементы массива bootstrap-reboot
                    foreach (int i in intArray) <br>
                      { <br>
                        Console.WriteLine(intArray[i]); <br>
                      }
                </strong>
                <br><br>
                Здесь в цикле foreach мы указали тип элементов int, так как у нас массив содержит элементы этого типа и после ключевого слова in указали массив элементы которого необходимо перебрать. Если бы у нас был массив строк, то цикл выглядел бы, соответственно, следующим образом:
                <br><br>
                <strong>
                    //создаем массив <br>
                    string[] strAttay = { "Один", "Два", "Три"}; <br>
                    //перебираем элементы <br>
                    foreach (int i in strArray) <br>
                    { <br>
                        Console.WriteLine(strArray[i]); <br>
                    }
                </strong>
                <br><br>
                Цикл foreach достаточно удобный для работы, но иногда бывает так, что возможностей цикла не достаточно. Например, мы создаем массив и нам требуется обеспечить доступ только  к элементам с чётными индексами (0, 2, 4, 6 и т.д.). Технически, мы можем использовать тот же foreach, ввести дополнительную переменную и с помощью неё проверять какой индекс у очередного элемента, но это усложнит наш код. Более гибким в этом плане является цикл for в котором мы можем задавать порядок выполнения.
                
                <h5><a name="3_2">В цикле for</a></h5>
                С этим циклом мы тоже уже знакомы. Попробуем реализовать озвученный выше вариант перебора элементов массива — прочитать значения только элементов с чётными индексами. С циклом for это можно сделать, например, вот так:
                <br><br>
                <strong>
                    //Индексы элементов            0   1  2   3    4   5   6   7   8   9   10 <br>
                    int[] intArray = new int[11] {  12, 7, 16, 17, -12, 65, 80, 89, 90, 91, 102}; <br>
                    for (int i=0; i<=intArray.Length; i++) <br>
                    if (i*2<=intArray.Length) <br>
                        Console.WriteLine($"Счётчик цикла: {i}. Читаем элемент с индексом {i * 2} значение: {intArray[i * 2]}"); <br><br>
                </strong>
            </p>
            <h3><a name="4">Многомерные массивы</a></h3>
            <p>
                До сих пор мы имели дело с так называемыми одномерными массивами, которые можно себе представить в уме как ряд переменных (числовых, строковых, символьных и т.д.). Визуально, наши одномерные массивы выглядели так:
                <br><br>
                <img src="img/les14_1.png" alt="1">
                <br><br>
                Однако, на одном измерении массива C# не заканчивается. Теоретически мы можем задать массив с любым количеством измерений (которые кстати, называются рангом), но на практике, обычно встречаются одно-, двух- и намного реже — трехмерные массивы. Образно, двумерный массив можно представить как обычную таблицу, а трехмерный массив — как куб переменных. Например, чтобы задать двумерный массив чисел (ранг = 2), необходима сделать вот такое объявление переменной:
                <br><br>
                <strong>int[,] TwoDimArray;</strong>
                <br><br>
                обратите внимание на запятую в квадратных скобках. В C# существует простое правило: ранг массива всегда на единицу больше количества запятых в квадратных скобках. Массив с рангом равным 3 (трехмерный) будет объявляться так:
                <br><br>
                <strong>int[,,] ThreeDimArray;</strong>
                <br><br>
                Инициализируются многомерные массивы точно также, как и одномерные — необходимо задать количество элементов в каждом измерении. Например, зададим массив состоящий из двух столбцов и пяти строк:
                <br><br>
                <strong>
                    int[,] array = new int[5, 2] { { 0, 1 }, <br>
                                            { 2, 3 }, <br>
                                            { 4, 5 }, <br>
                                            { 6, 7 }, <br>
                                            { 8, 9 } <br>
                                            };
                </strong>
                                            <br><br>
                Теперь, чтобы обратиться как какому-либо элементу массива, нам необходимо указывать два индекса — индекс строки и индекс столбца. Например, получим значение из четвертой строки второго столбца. Так как нумерация элементов в массивах начинается с нуля, то код будет такой:
                <br><br>
                <strong>
                    Console.WriteLine(array[3, 1]); <br>
                    //OUTPUT: 7
                </strong>
                <br><br>
                Для создания многомерных массивов могут использоваться те же самые языковые конструкции, которые показаны выше для одномерных массивов. Возможно, что на первом этапе работы с массивами в  C# сложность будет представлять перебор элементов многомерных массивов. На самом деле, ничего сложного в этом нет.
            </p>
            <h3><a name="5">Основные методы и свойства для работы с массивами в C#</a></h3>
            <p>
                Для того, чтобы показать перебор элементов многомерных массивов, нам придётся забежать немного вперед и прояснить для себя один момент. В C# массивы представляют собой объекты со своими свойствами и методами. Если Вы имели дело с другими языками программирования, например, с Delphi, то знаете, что для получения, например, длины массива необходимо использовать отдельный метод — Length(). В C# же, в силу того, что массив — это объект, вы можете вызвать методы и читать свойства этого объекта просто написав его имя и нажав точку.
                <br><br>
                Подобная функциональность C# достаточно сильно упрощает изучение языка — нам не надо держать в голове перечень отдельных методов для работу с тем или иным типов данных, всё, что нам необходимо — это вызвать список методов и свойств объекта и выбрать необходимый. О том, как такое поведение
                <h5><a name="5_1">Свойства массивов C#</a></h5>
                <img src="img/les14_2.png" alt="2">
                <h5><a name="5_2">Методы массивов в C#</a></h5>
                <img src="img/les14_3.png" alt="3">
                <br><br>
                Это далеко не все свойства и методы для работы с массивами в C#, но приводить их сейчас не имеет смысла, так как, во-первых, перечисленных свойств достаточно, чтобы понять как работать с массивами и, во-вторых, даже приведя перечень оставшихся свойств и методов, мы не сможем ими правильно воспользоваться, так как знаний у нас с вами пока не достаточно.
            </p>
            <h3><a name="6">Перебор элементов многомерного массива C#</a></h3>
            <p>
                <h5><a name="6_1">В цикле foreach</a></h5>
                Цикл foreach предоставляет нам самый простой и понятный способ доступа к каждому элементы массива. Например, возьмем наш двумерный массив и попробуем перебрать все его элементы в цикле foreach:
                <br><br>
                <strong>
                    int[,] array = new int[5, 2] { { 0, 1 }, <br>
                                                   { 2, 3 }, <br>
                                                   { 4, 5 }, <br>
                                                   { 6, 7 }, <br>
                                                   { 8, 9 } <br>
                                                 };<br>
                    foreach (int i in array)bootstrap-reboot
                    {<br>
                        Console.Write("{0} ", i);;<br>
                    }
                </strong>
                <br><br>
                В результате, в консоли появится строка, содержащая элементы массива:
                <br><br>
                0 1 2 3 4 5 6 7 8 9
                <br><br>
                Цикл foreach «разворачивает» массив в строку, наращивая вначале индексы самого правого измерения (в нашем случае, это измерение имеет длину 2), а затем смещается влево и перебирает все индексы этого измерения. Это очень простой способ добраться до всех элементов многомерного массива. Но, что делать, если нам необходимо пройти только по крайнему правому столбцу? То есть получить значения 1, 3, 5, 7, 9. Для этого мы можем воспользоваться циклом for.
                <h5><a name="6_2">В цикле for</a></h5>
                Как я уже говорил выше, цикл for даёт более гибкий механизм работы с массивами C#. Итак, получим все значения элементов из последнего столбца. Приведу только два варианта. Вариант 1 — когда ранг массива известен и мы знаем размерность (количество элементов) последнего измерения:
                <br><br>
                <strong>
                    for (int i=0; i<=array.GetLength(0); i++) bootstrap-reboot
                    Console.Write("{0} ", array[i,1]);
                </strong>
                <br><br>
                здесь в условии цикла мы воспользовались методом GetLength(), чтобы получить количество элементов по первому измерению (5), а уже в теле цикла получаем значения элементов в каждой строке во втором столбце (помним, что индекс первых элементов в массиве всегда равен 0).
                <br><br>
                Второй вариант — нам надо прочитать значения в последнем столбце массива, но, при этом мы не знаем размерность второго измерения. Чтобы было по-понятнее, я объявил в коде две дополнительные переменные:
                <br><br>
                <strong>
                    int rank = array.Rank-1; <br>
                    int maxIndex = array.GetUpperBound(0) + 1; <br>
                    for (int i=0; i<=maxIndex; i++) <br>
                    Console.Write("{0} ", array[i, array.GetUpperBound(rank)]);<br>
                </strong>
                <br><br>
                В цикле  мы запрашиваем элемент с индексами:
                <br><br>
                <strong>array[i, //текущая строка  <br>
                        array.GetUpperBound(rank)]) //последний столбец</strong>
                <br><br>
                Соответственно, если необходимо пройти по всем элементам массива, то можно использовать вложенные циклы for и организовать доступ к элементам массива в любом порядке — построчно, по столбцам…да хоть по диагонали — тут всё будет зависеть от задачи.
            </p>
            <h3><a name="7"></a></h3>
            <p>
                Массив массивов — это массив, элементы которого сами являются массивами. Элементы массива массивов могут иметь различные измерения и размеры. Массив массивов также иногда называется нерегулярным или зубчатым массивом. Объявление массива массивов выглядит следующим образом:
                <br><br>
                <strong>int[][] array = new int[3][];</strong>
                <br><br>
                здесь мы объявили массив массивов на три элемента где каждый элемент — это отдельный массив. Так как массивы в C# относятся к ссылочным типам данных, то по умолчанию каждый элемент массива равен null и, чтобы использовать элементы такого массива, нам необходимо их также инициализировать. Например, так:
                <br><br>
                <strong>
                    array[0] = new int[2]; <br>
                    array[1] = new int[3]; <br>
                    array[2] = new int[4];
                </strong>
                <br><br>
                Теперь наш массив содержит три массива на 2, 3 и 4 элемента соответственно и каждый из этих массивов будет содержать целые числа. Чтобы заполнить массив значениями элементов, можно воспользоваться любым из способов, которые мы рассмотрели для одномерных массивов, например, так:
                <br><br>
                <strong>
                    int[][] array = new int[][] <br>
                    { <br>
                        new int[] { 1, 2}, <br>
                        new int[] { 3, 4, 5 }, <br>
                        new int[] { 6, 7, 8, 9 } <br>
                    };
                </strong>
                <br><br>
                Для доступа к элементам массива массивов необходимо использовать вот такую языковую конструкцию:
                <br><br>
                <strong>array[0][1] <br>
                        //2</strong>
            </p>
            <h3><a name="8">Неявно типизированные массивы</a></h3>
            <p>
                Как и обычные переменные, C# допускает объявление неявно типизированных массивов. При этом, компилятор сам определить наиболее подходящий тип элементов такого массива. Например,
                <br><br>
                <strong>
                    var a = new[] { 1, 10, 100, 1000 }; // int[] <br>
                    var b = new[] { "hello", null, "world" }; // string[]
                </strong>
                <br><br>
                При этом, если Вы попытаетесь объявить вот такой массив:
                <br><br>
                <strong>var с = new[] { 1, null, "world" };</strong>
                <br><br>
                то компилятор C# вернет следующую ошибку.
            </p>
            <h3><a name="9">Итого</a></h3>
            <p>
                Итак, сегодня мы рассмотрели массивы в C# — для чего нужны массивы, какие бывают массивы, как получить доступ к элементам массива, а также их основные свойства и методы в C#. Возможно, что пока тяжело понять всю мощь и преимущества использования массивов в программировании, но, со временем всё встанет на свои места.
            </p>
        </div>
    </div>
</body>
</html>