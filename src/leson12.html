<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="css/bootstrap-reboot.min.css">
    <link rel="stylesheet" href="css/style.min.css">
    <title>Методы в C#</title>
    <style>
        a {
            text-decoration: none;
        }
    </style>
</head>
<body>

    <header>
        <section class="header">
            <div class="container">
                <header id="sidebar">
                    <script src="header.js"></script>
                </header>
            </div>
        </section>
   </header>

   <div class="leson12">
        <div class="container">
            <h1>Методы в C#</h1>
            <p>
                Содержание
                <ul>
                    <li><a href="#1">Определение методов в C#</a></li>
                    <li><a href="#2">Учимся определять собственные методы в C#</a></li>
                    <li><a href="#3">Вызов методов C#</a></li>
                    <li><a href="#4">Возвращаемые методами C# значения</a></li>
                    <li><a href="#5">Методы C#, возвращающие несколько значений</a></li>
                    <li><a href="#6">Выход из метода</a></li>
                    <li><a href="#7">Сокращенная запись методов в C#</a></li>
                    <li><a href="#8">В чем различие между методом, функцией и процедурой</a></li>
                    <li><a href="#9">Итого</a></li>
                </ul>
                Методы в C#, как и практически в любом другом языке программирования — это именованные участки кода, в котором выполняется ряд операций. С методами мы так или иначе сталкивались при изучении возможностей C# с самого начала.  Пишем мы первую программу, выводящую на экран строку «Hello world» или изучаем циклы и способы сортировки массивов — мы вызываем в нашей программе хотя бы один метод.  И сегодня мы попробуем более детально изучить методы в C#, а также научимся их вызывать.
            </p>
            <h3><a name="1">Определение методов в C#</a></h3>
            <p>
                В самом общем случае, определение метода в C# выглядит следующим образом:
                <br><br>
                <strong>
                    [модификаторы] тип_возвращаемого_значения Название_метода ([параметры]) <br>
                    { <br>
                    тело метода  <br>
                    } <br><br>
                </strong> 
                обязательными элементами для определения метода в C# являются: тип возвращаемого значения и имя метода. Самый первый пример метода, который мы могли видеть в C# — это метод Main(), который является и точкой входа для нашего консольного приложения. Рассмотрим описание этого метода:
                <br><br>
                <strong>
                    static void Main(string[] args) <br>
                    { <br>
                        Console.WriteLine("Hello World!"); <br>
                    } <br><br>
                </strong>
                <ul>
                    <li>static — это модификатор. О том, что он обозначает, мы поговорим позднее, когда доберемся до работы с классами и объектами в C#.</li>
                    <li>void — тип возвращаемого значения. Это ключевое слово используется для того, чтобы указать, что метод не возвращает ничего.</li>
                    <li> Main — это имя метода.</li>
                    <li>string[] args— это единственный параметр метода — массив строк.</li>
                </ul>
                В фигурных скобках Visual Studio создала нам тело метода, состоящее по умолчанию всего из одной строки — вывод в консоль «Hello world».
                <br><br>
                Попробуем написать свой первый собственный метод C#. Можно было бы ограничиться стандартными примерами первых методов, типа расчёта площади круга или сложения двух чисел, но мы сделаем по-другому — мы немного улучшим программу сортировки массива, которую написали в прошлый раз.
            </p>
            <h3><a name="2">Учимся определять собственные методы в C#</a></h3>
            <p>
                Посмотрим на исходный код нашей программы:
                <br><br>
                <img src="img/les12_1.png" alt="1">
                <br><br>
                здесь у нас в методе Main() чего только не напихано — и вывод массива на экран и сортировка выбором. Обычно, участок кода выделяется в отдельный метод, если он (код) повторяется в программе многократно или необходимо выделить решение какой-либо задачи. В нашем же случае в программе можно выделить два отдельных метода:
                <br><br>
                Метод вывода массива на экран (этот код у нас повторяется дважды — перед сортировкой и после сортировки)
                <br><br>
                Метод, который будет сортировать массив.
                <br><br>
                Начнем с метода вывода массива на экран. Название метода должно максимально отражать его суть — пусть название метода будет PrintArray. Далее, что будет возвращать наш метод? В данном случае, ничего возвращать не требуется, поэтому будем использовать void. И, наконец, параметры. Задача метода — вывести на экран массив. Чтобы можно было в дальнейшем многократно использовать наш метод, в качестве параметра метод должен принимать какой-либо массив. Итого, получается вот такое описание метода:
                <br><br>
                <strong>
                    static void PrintArray(int[] array) <br>
                    { <br>
                    } <br><br>
                </strong>
                В теле метода мы должны разместить код, который выводит массив на экран, то есть весь метод целиком, включая описание и тело метода у нас должны получиться вот такими:
                <br><br>
                <strong>
                    static void PrintArray(int[] array) <br>
                    { <br>
                        foreach (int value in array) <br>
                        { <br>
                            Console.Write($"{value} "); <br>
                        } <br>
                    }<br><br>
                </strong>
                Здесь мы в цикле foreach перебираем массив, переданный нам в качестве параметра и выводим значения на экран в виде строки.
                <br><br>
                Второй метод — это метод сортировки массива. Опять же, имя — так как у нас используется сортировка выбором, то пусть метод будет называться SelectSort. Возвращаемое значение также оставляем пустым (void), так как перед нами не стоит задачи хранить оба варианта массива (сортированный и несортированный). В качестве параметра будет выступать, опять же массив целых чисел. Весь метод должен выглядеть вот так:
                <br><br>
                <img src="img/les12_2.png" alt="2">
            </p>
            <h3><a name="3">Вызов методов C#</a></h3>
            <p>
                Чтобы вызвать метод C# необходимо написать его имя и, при необходимости, в круглых скобках передать методу необходимые параметры. Методы мы будем вызывать внутри метода Main() вот так:
                <br><br>
                <img src="img/les12_3.png" alt="3">
                <br><br>
                Теперь можно запустить программу и убедиться, что всё работает ровно так, как и в прошлый раз, НО при этом можно назвать следующие преимущества использования методов в C#:
                <ol>
                    <li>Методы можно многократно использовать в программе (например, PrintArray мы вызвали дважды)</li>
                    <li>Выделение частей кода в отдельные методы позволяет сделать код более понятным (согласитесь, что изучить код метода на 10-50 строк намного проще, чем изучать «портянку» на 100500 строк)</li>
                    <li>Использование методов позволяет значительно упростить дальнейшее сопровождение всего проекта. Например, если мы заходим, чтобы значения массива выводились не через пробел, а через запятую, то нам будет достаточно переписать всего один метод, а не искать по всему коду где массив выводится на экран. На небольших проектах это преимущество не совсем очевидно, но, когда вы имеете дело с проектом на десятки и сотни тысяч строк кода, то использование методов становится уже жизненно необходимым (представьте себе программу, хотя бы на 1000 строк кода всего с одним методом…жуть).</li>
                </ol>
            </p>
            <h3><a name="4">Возвращаемые методами C# значения</a></h3>
            <p>
                До сих пор мы имели дело с методами, которые не возвращают значений (с void в качестве возвращаемого значения). Что делать если метод должен вернуть какое-либо значение, например, если мы хотим узнать сколько замен провел наш метод SelectSort, чтобы отсортировать массив по возрастанию? Для этого наш метод должен:
                <br><br>
                в качестве возвращаемого значения уже иметь не void, а число int (количество перестановок у нас измеряется целыми числами — не может быть 1,5 перестановки)
                использовать в теле метода оператор return.
                Оператор return завершает выполнение текущего метода и возвращает значение из этого метода. Вызов оператора return выглядит следующим образом:
                <br><br>
                <strong>return[(expression)]</strong>
                <br><br>
                expression — это значение, которое должен вернуть метод. Если оператор в коде выглядит вот так:
                <strong>return;</strong>
                <br><br>
                то метод не вернет ничего, но при этом завершит свою работу. Давайте перепишем наш метод SelectSort, чтобы получать не только отсортированный массив, но и количество перестановок, которые были сделаны.
                <br><br>
                <img src="img/les12_4.png" alt="4">
                <br><br>
                Теперь наша программа сортировки массива станет ещё более информативной. Метод SelectSort можно вызвать вот так:
                <br><br>
                <strong>Console.WriteLine($"Количество перестановок в массива: {SelectSort(intArray)}");</strong>
                <br><br>
                Здесь мы одной строкой и сортируем массив и выводим в консоль количество перестановок. Результат работы такой программы в консоли будет выглядеть следующим образом:
                <br><br><img src="img/les12_5.png" alt="5">
            </p>
        <h3><a name="5"> Методы C#, возвращающие несколько значений</a></h3>
        <p>
            Что, если наш метод должен вернуть не одно, а сразу несколько значений? Опять же,возвращаясь к нашему методу SelectSort — что делать, если нам необходимо вернуть не только количество замен, но и количество сравнений элементов (количество итераций внутреннего цикла for)? Такая задача может решаться несколькими способами, я же покажу лишь один из них — одно значение (количество перестановок) мы будем передавать в качестве возвращаемого значения, а второе — через параметр метода. Сделать это можно, объявив метод следующим образом:
            <br><br>
            <strong>static int SelectSort(int[] array, out int compareCount)</strong>
            <br><br>
            Обратите внимание на то, что написано в круглых скобках после запятой. Ключевое слово out используется для передачи аргументов (параметров) по ссылке. Есть также аналогичное ключевое слово ref, но ref требует, чтобы перед передачей в метод переменная должна была инициализирована, out же этого не требует. Теперь наш метод принимает два параметра один из которых обязательно должен быть переменной. То есть, мы можем вызвать наш метод вот так:
            <br><br>
            <strong>SelectSort(intArray, out compCount)</strong>
            <br><br>
            оба параметра — переменные. А можем вот так:
            <br><br>
            <strong>SelectSort(new int[] { 9, 8, 7, 6, 4, 1, 2, 3, 0 }, out compCount);</strong>
            <br><br>
            здесь мы передаем в первом параметре значение — массив целых чисел, а во втором переменную (правда, то как будет выглядеть сортированный массив мы уже не увидим). Но вот такой вызов метода уже не пройдет:
            <br><br>
            <strong>SelectSort(new int[] { 9, 8, 7, 6, 4, 1, 2, 3, 0 }, out 15);</strong>
            <br><br>
            Здесь я попытался передать не переменную, а значение и компилятор C# выдал ошибку:
            <br><br>
            Надеюсь, понятно. Теперь вернемся к нашему методу и перепишем его следующим образом:
            <br><br>
            <img src="img/les12_6.png" alt="6">
            <br><br>
            Теперь наш метод C# возвращает уже не одно, а два значения: количество перестановок и количество сравнений, а нашу программу можно переписать следующим образом:
            <br><br>
            <img src="img/les12_7.png" alt="7">
        </p>
        <h3><a name="6">Выход из метода</a></h3>
        <p>
            Выше я уже рассказал, что в методах может использоваться оператор return, который обеспечивает выход из метода и возврат значения метода в вызывающий метод. При этом, оператор return может использоваться и в методах с типом void для прерывания работы метода. Например, следующий код с точки зрения синтаксиса полностью верный:
            <br><br>
            <strong>
                static void EmptyMethod() <br>
                {<br>
                    return; <br>
                    Console.WriteLine("Hello world"); <br>
                }<br><br>
            </strong>
    Но, при этом, строка с вызовом WriteLine абсолютно бесполезна так как до этой строки мы никогда не дойдем — оператор return заставит нас выйти из метода сразу же, не достигая конца тела метода. Поэтому на будущее стоит запомнить,что return необходимо располагать именно в том месте где действительно необходимо обеспечить выход из метода, например, перед последней фигурной скобкой.
        </p>
        <h3><a name="7">Сокращенная запись методов в C#</a></h3>
        <p>
            Если тело метода содержит всего одну инструкцию, то допускается сокращенная запись такого метода. Например, пусть у нас есть такой метод:
            <br><br>
            <strong>
                static void PrintHello(string message) <br>
                { <br>
                    Console.WriteLine(message);  <br>
                }<br><br>
            </strong>
            тело метода содержит всего одну инструкцию — вывод сообщения в консоль. В этом случае, мы можем сократить наш метод до следующей записи:
            <br><br>
            <strong>static void PrintHello(string message) => Console.WriteLine(message);</strong>
            <br><br>
            то есть, вместо фигурных скобок мы используем оператор => и далее сразу пишем содержимое тела метода (единственную инструкцию).
        </p>
        <h3><a name="8">В чем различие между методом, функцией и процедурой</a></h3>
        <p>
            В различных источниках информации, кроме названия «метод» можно встретить также и такие названия как «функция» и «процедура». В чем же принципиальное отличие метода, функции и процедуры? Применительно к C#, в отличие, например, от Delphi/Pascal — это, скорее, философский вопрос. На мой взгляд, в C# все эти три понятия тождественны.
            <br><br>
            Обычно, функцию определяют так: функция — это метод, который возвращает какое-либо значение. Например, наш метод SelectSort возвращает значение int. То есть, технически мы можем сказать, что SelectSort — это функция.
            <br><br>
            В свою очередь, процедура — это метод, который не возвращает ничего. Опять же, чисто технически, можно сказать, что наш метод PrintArray — это процедура. Но, если обратить внимание на справочник по C#, то там «void — указывает тип возвращаемого значения для метода, который не возвращает значения.» Вот такая вот философская задача. То есть вроде как и нет возвращаемого значения, но всё же тип возвращаемого значения — void.
            <br><br>
            Поэтому, можно констатировать следующее: метод — это обобщенное название и функций и процедур, а в C# все эти три понятия тождественны, но за одним исключением — в отдельную группу методов выделяются как раз-таки «локальные функции«, о которых мы поговорим позднее.
        </p>
        <h3><a name="9">Итого</a></h3>
        <p>
            Сегодня мы познакомились в общих чертах с методами C#, научились определять собственные методы, обеспечивать возврат из метода одного и нескольких значений, а также значительно улучшили нашу программку для сортировки массива методом вставок. К работе с методами мы будем возвращаться ещё неоднократно, так что, эту информацию постараемся запомнить как можно лучше.
        </p>
        </div>
   </div>
</body>
</html>