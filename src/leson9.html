<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="css/bootstrap-reboot.min.css">
    <link rel="stylesheet" href="css/style.min.css">
    <title>Логические операции в C#</title>
    <style>
        a {
            text-decoration: none;
        }
    </style>
</head>
<body>

    <header>
        <section class="header">
            <div class="container">
                <header id="sidebar">
                    <script src="header.js"></script>
                </header>
            </div>
        </section>
   </header>

    <div class="leson9">
        <div class="container">
            <h1>Логические операции в C#</h1>
            <p>
                Содержание
                <ul>
                    <li><a href="#1">Условный оператор if</a></li>
                    <li><a href="#2">Условный оператор switch</a></li>
                    <li><a href="#3">Выражения switch в C# 8.0</a></li>
                    <li><a href="#4">Тернарная операция (сокращенная проверка)</a></li>
                    <li><a href="#5">Итого</a></li>
                </ul>
                Программы с линейным выполнением ряда операций встречаются довольно редко. Чаще всего в программе присутствует какая-то «логика», то есть программа выполняет какие-либо операции в зависимости от того, какие действия производит пользователь. Например, если вы пробуете задать недопустимое значение в программе, то вряд ли это действие серьезно отразиться на работоспособности вашего компьютера, скорее всего программа выдаст вам сообщение о том, что введенное значение некорректно и требуется повторить ввод. Все логические операции связаны с логическим типом bool и, соответственно, результатом выполнения той или иной логической операции может быть только true (истина) или false (ложь). Для того, чтобы выстроить логику программы, в C#, как и в других языках программирования, используются логические операции или, как их ещё называют, логические конструкции о которых мы сегодня и поговорим.
            </p>
            <h3><a name="1">Условный оператор if</a></h3>
            <p>
                Начнем с самого простого — условного оператора if. В общем случае, этот оператор выглядит следующим образом:
                <br><br>
                <strong>
                    if (Условие) <br>
                        Действие 1; <br>
                    else <br>
                        Действие 2; <br><br>
                </strong>
                Дословно этот оператор можно описать так: если выполняется Условие, то необходимо выполнить Действие 1, иначе (если Условие не выполняется), то выполнить Действие 2. На что здесь необходимо обратить внимание. Во-первых, Условие обязательно заключается в круглые скобки. Немного раздражало после Delphi, но, в принципе, довольно быстро привыкаешь где надо «на автомате» расставлять скобки. Во-вторых, после Действия 1 обязательно ставится точка с запятой. Если необходимо выполнить несколько действие, то, соответственно, эти действия заключаются в фигурный скобки. Так же, как и в Delphi, ключевое слово else может отсутствовать, если не требуется выполнять никаких действий в случае, если Условие вернет false.
                <br><br>
                Рассмотрим несколько примеров использования условного оператора if, используя те знания, которые у нас уже есть на данный момент. Например, пусть пользователь задаст любое число от 0 до 10 и наша программа, в зависимости от того чётное это число или не четное, либо увеличит число на 1, либо, наоборот — уменьшит. Ещё со школьной скамьи мы знаем, что чётное число — это число, которое делится без остатка на 2. Про ноль, конечно, есть вопросы, но будем считать, что ноль — тоже чётное число.  Программу можно представить следующим образом:
                <br><br>
                <strong>
                    Console.WriteLine("Введите число от 0 до 10:");  <br>
                    int i = int.Parse(Console.ReadLine()); <br>
                    if (i % 2 == 0) <br>
                    Console.WriteLine($"{i} - четное число"); <br>
                    else <br>
                    Console.WriteLine($"{i} - нечетное число"); <br>
                    Console.ReadLine(); <br><br>
                </strong>
                Раздерем эту программу построчно. Вначале, мы предлагаем пользователю ввести какое-либо число:
                <br><br>
                <strong>Console.WriteLine("Введите число от 0 до 10:"); <br><br></strong>
                Далее идёт строка в которой мы объявляем переменную i и тут же её инициализируем для чего конвертируем строку, которую ввел пользователь, в целое число, то есть выполняем сразу три действия:
                <ol>
                    <li>объявляем переменную i int i</li>
                    <li>читаем из консоли строку, которую ввел пользователь: Console.ReadLine()</li>
                    <li>конвертируем строку в целочисленный тип int: int.Parse(Console.ReadLine())</li>
                </ol>
                Далее идет наш условный оператор if в котором мы проверяем остаток от деления, воспользовавшись соответствующим арифметическим оператором %. Если условие истинно, то выводим строку, что число является чётным, иначе — что число является не четным. 
                <br><br>
                Последняя строка — просто «заглушка» для того, чтобы окно консоли не закрывалось до тех пор, пока пользователь не нажмет ввод. Используя знания по переменным в C# эту строку можно было бы написать так:
                <br><br>
                <strong>_ = Console.ReadLine();<br><br></strong>
                Теперь можно запустить программу, нажав F5 и посмотреть на результат, например:
                <br><br>
                <strong>
                    Введите число от 0 до 10: <br>
                    6 <br>
                    6 — четное число <br><br>
                </strong>
                Конечно, приведенный выше код программы — это только демонстрация работы оператора if и при разработке реального проекта у опытного программиста к этому коду возникло бы сразу масса вопросов, например, почему программа не проверяет, что число действительно находится в пределах от 0 до 10, а не больше или меньше предельных значений? Или почему не проводится проверка на то, что пользователь ввел именно число, а не символ или вообще строку? Про обработку ошибок мы ещё поговорим, а пока попробуем доработать наш код и снять приведенные выше вопросы используя только условный оператор if. 
                <br><br>
                <img src="img/les9_1.png" alt="1">
                <br><br>
                Здесь мы уже воспользовались методом TryParse(), который возвращает true, если удалось преобразовать строку в целое число и false в противном случае. Если пользователь ввел именно число, то далее идёт проверка на вхождение числа в диапазон от 0 до 10 и, если это условие оказалось истиной (true), то проводится проверка числа на чётность. Конечно, и эту программу можно улучшать, но мы этого сегодня делать не будем, а лучше рассмотрим ещё один условный оператор C# — switch. 
            </p>
            <h3><a name="2">Условный оператор switch</a></h3>
            Дословно цитируя документацию по языку C#, switch— это оператор выбора, который выбирает для выполнения один раздел switch из списка кандидатов, сравнивая их с выражением соответствия.  Этот оператор часто используется вместо оператора if, когда требуется проверить более трех условий.
            <br><br>
            Оператор switch в C# выглядит следующим образом:
            <br><br>
            <strong>
                switch (переменная) <br>
                {<br>
                case Значение_1: <br>
                    Действия; <br>
                    break (goto, return); <br> 
                case Значение_2: <br>
                    Действия; <br>
                    break (goto, return); <br> 
                case Значение_2: <br>
                    Действия; <br>
                    break (goto, return); <br> 
                default: <br>
                Действие_по_умолчанию; <br>
                break; <br>
                } <br><br>
            </strong>
            Опять же на что обратить внимание. После ключевого слова switch в круглых скобках указывается переменная, которая будет сравниваться со значениями (напротив ключевого слова case) и в зависимости от результата сравнения выполнять действия. Если же не одно значение переменной не подойдет ни под один case — выполнится действие по умолчанию. Действие по умолчанию не является обязательным и может отсутствовать.
            <br><br>
            В конце каждого блока case устанавливается один из операторов перехода: break, goto или return. Наиболее часто при этом используется break — прервать дальнейшее выполнение действие в блоках case.
            <br><br>
            На первый взгляд switch выглядит немного запутанно по сравнению с аналогичным оператором case..of из Delphi, но, при детальном рассмотрении возможностей этого оператора становится понятно почему разработчики C# сделали именно такую конструкцию, а не другую.  
            <br><br>
            Рассмотрим пример, когда использование оператора if не желательно так как приводит к усложнению восприятия исходного кода, а со switch код станет намного понятнее. Пусть наша программа будет выводить название дня недели по введенному пользователем числу от 1 до 7 где 1 — это понедельник, а 7, соответственно, воскресенье. Для экономии времени я упущу необходимые проверки того, что вводит пользователь в консоли и оставлю только оператор switch.
            <br><br>
            <img src="img/les9_2.png" alt="2">
            <br><br>
            Теперь можете самостоятельно попробовать составить ту же самую программу, но только, используя оператор if и наглядно увидите, что switch делает код намного более читабельным. В приведенном примере мы использовали оператор перехода break.  Посмотрим как внутри switch можно использовать оператор goto.
            <br><br>
            <img src="img/les9_3.png" alt="3">
            <br><br>
            Обратите внимание на блок case 4 — здесь использован оператор перехода goto на блок case 5. Если пользователь вводит число 4, то программа вначале заходит в case 4, выводит строку с названием недели, затем, благодаря оператору goto переходит в case 5, снова выводит строку и уже в case 5 встречает оператор break и выходит за пределы оператора switch.  Что касается оператора return, то он завершает выполнение метода, в котором он присутствует, и возвращает управление вызывавшему методу и в операторе switch используется реже, чем break и goto, поэтому пример с return рассматривать не будем, а лучше посмотрим на улучшенную версию switch, которая появилась в C# 8.0. 
        <h3><a name="3">Выражения switch в C# 8.0</a></h3>
        <p>
            Начиная с версии C# 8.0 в языке появилось выражение switch. Выражения switch позволяют упростить код, который возвращает какое-либо значение. Чтобы было более понятно в чём суть введения в язык нового элемента составим нашу программу определения названий дней недели, используя выражение switch.  Для начала приведу весь исходный код программы:
            <br><br>
            <img src="img/les9_4.png" alt="4">
            <br><br>
            На что обратить внимание. Во-первых, мы создали отдельный метод DayName(), который возвращает название дня недели. В этом методе мы и используем выражение switch для возврата значения. Отличия выражение switch от одноименного условного оператора следующие:
            <ol>
                <li>выражение возвращает значение, в то время, как оператор switch никакого значения может и не возвращать (см. примере в предыдущем разделе — там switch ничего не возвращал, а использовался только для вывода строки на экран.</li>
                <li>элементы case : заменены на более лаконичный и интуитивно понятный вариант =></li>
                <li>в выражении ключевое слово switch стоит после переменной</li>
                <li>default заменено на пустую переменную _.</li>
            </ol>
            Может сложиться впечатление, что для использования выражения switch обязательно требуется писать отдельный метод. Совсем не обязательно — это просто я решал заодно показать для чего используется оператор перехода return, а вообще, можно было бы написать программу и так:
            
            <img src="img/les9_5.png" alt="5">
        </p>
        <h3><a name="4">Тернарная операция (сокращенная проверка)</a></h3>
        <p>
            Тернарная операция (иногда говорят — сокращенная проверка) позволяет сократить исходный код программы с операторами if и сделать код более лаконичным и интуитивно понятным. Выглядит сокращенная проверка следующим образом:
            <br><br>
            <strong>Условие ? Действие1 : Действие2 <br><br></strong>
            Здесь все просто: вначале идет условие, истинность которого необходимо проверить. Если условие истинно (равно true), то выполняется Действие1, если условие ложно (равно false) — выполняется Действие2. Для примера, перепишем наш первый вариант программы проверки чисел на чётность. Вот как будет выглядеть программа с использованием тернарной операции: 
            <br><br>
            <strong>
                Console.WriteLine("Введите число от 0 до 10:"); <br>
                int i = int.Parse(Console.ReadLine()); <br>
                //используем тернарную операцию  break
                Console.WriteLine((i % 2 == 0) ? $"{i} - четное число" : $"{i} - нечетное число"); <br>
                _ = Console.ReadLine(); <br><br>
            </strong>
            Теперь можете сравнить этот код с первой версией программы — с тернарной операцией код стал короче на 3 строки (было 7 строк, а стало — 4).  Периодически Visual Studio сама предлагает упростить код и использовать тернарные операции, что делает работу с C# ещё удобнее и легче.
        </p>
        <h3><a name="5">Итого</a></h3>
        <p>Сегодня мы вместе изучили какие условные конструкции могут использоваться в C# и как они работают, познакомились с выражениями switch, а также рассмотрели тернарные операции C#. Теперь наши программы могут использовать в работе «логику». </p>
    </div>
    </div>
</body>
</html>